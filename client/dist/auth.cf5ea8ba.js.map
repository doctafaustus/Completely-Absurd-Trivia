{"version":3,"sources":["utils/utils.js","scripts/auth.js"],"names":["utils","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","googleProvider","auth","GoogleAuthProvider","document","querySelector","addEventListener","logIn","logOut","onAuthStateChanged","user","console","log","localStorage","removeItem","signInWithPopup","then","result","addIfNew","catch","error","code","message","email","credential","fetch","method","headers","body","JSON","stringify","authUser","response","json","data","setItem","signOut"],"mappings":"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","file":"auth.cf5ea8ba.js","sourceRoot":"..","sourcesContent":["const utils = {\r\n\r\n  // getCookie(name) {\r\n  //   const nameEQ = `${name}=`;\r\n  //   const ca = document.cookie.split(';');\r\n\r\n  //   for (let i = 0; i < ca.length; i++) {\r\n  //     let c = ca[i];\r\n\r\n  //     while (c.charAt(0) === ' ') {\r\n  //       c = c.substring(1, c.length);\r\n  //     }\r\n\r\n  //     if (c.indexOf(nameEQ) === 0) {\r\n  //       return c.substring(nameEQ.length, c.length);\r\n  //     }\r\n  //   }\r\n\r\n  //   return null;\r\n  // },\r\n\r\n  // setCookie(name, value, minutes) {\r\n  //   let expirationFragment = '';\r\n\r\n  //   if (minutes) {\r\n  //     const date = new Date();\r\n  //     const ms = minutes * 60 * 1000;\r\n  //     const expiration = date.getTime() + ms;\r\n\r\n  //     date.setTime(expiration);\r\n  //     expirationFragment = `; expires=${date.toGMTString()}`;\r\n  //   }\r\n\r\n  //   document.cookie = `${name}=${value}${expirationFragment}; path=/`;\r\n  // },\r\n\r\n  // deleteCookie(name) {\r\n  //   document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`;\r\n  // }\r\n\r\n};\r\n\r\nexport default utils;","import utils from '../utils/utils.js';\r\n\r\n// Initialize firebase\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCPNbwrNgjrpf491e3WJwWQwnNqPJ0R7XE\",\r\n  authDomain: \"completely-absurd-trivia-b939b.firebaseapp.com\",\r\n  databaseURL: \"https://completely-absurd-trivia-b939b.firebaseio.com\",\r\n  projectId: \"completely-absurd-trivia-b939b\",\r\n  storageBucket: \"completely-absurd-trivia-b939b.appspot.com\",\r\n  messagingSenderId: \"882068649922\",\r\n  appId: \"1:882068649922:web:540a53211b1d913bf8885b\",\r\n  measurementId: \"G-DV7RDPVL0Q\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\n// Log In\r\ndocument.querySelector('#log-in').addEventListener('click', logIn);\r\n\r\n// Log Out\r\ndocument.querySelector('#log-out').addEventListener('click', logOut);\r\n\r\n// Control loggedIn localStorage when user signs in/out\r\nfirebase.auth().onAuthStateChanged(user => {\r\n  if (user) {\r\n    console.log('logged in', user);\r\n  } else {\r\n    console.log('not logged in');\r\n    localStorage.removeItem('user');\r\n  }\r\n});\r\n\r\n\r\nfunction logIn() {\r\n  firebase.auth().signInWithPopup(googleProvider).then(result => {\r\n    const user = result.user;\r\n    console.log('user', user);\r\n    addIfNew(user);\r\n  }).catch(error => {\r\n    const { code, message, email, credential } = error;\r\n    console.log(`Error signing in: ${code} - ${message} - ${email} - ${credential}`);\r\n  });\r\n}\r\n\r\nfunction addIfNew(user) {\r\n  fetch('/api/add-if-new', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ authUser: user })\r\n  })\r\n  .then(response => response.json())\r\n  .then(data => {\r\n    console.log('/api/add-if-new response: \\n', data);\r\n    localStorage.setItem('user', JSON.stringify(data));\r\n  });\r\n}\r\n\r\nfunction logOut() {\r\n  firebase.auth().signOut().then(\r\n    () => {\r\n      console.log('Signed Out');\r\n    },\r\n    error => console.error('Sign Out Error', error)\r\n  );\r\n}\r\n"]}